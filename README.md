# JavaScript Breakpoint Collection

Find out what part of your code is causing a behavior in the browsers. For example you can pause when the window scroll position is updated or when cookie data is written.

Either use the UI or add breakpoints from the console:

    breakpoints.debugScroll()
    breakpoints.debugPropertySet(obj, "propertyName", "trace") // trace instead of pausing
    breakpoints.debugCookieWrites(function(){ /* whatever */ })
    breakpoints.resetLastBreakpoint()

## Chrome Extension

[Install from Chrome Web Store](https://chrome.google.com/webstore/detail/javascript-breakpoint-col/kgpjjblahlmjlfljfpcneapmeblichbp)

![Breakpoint Extension Screenshot](https://cloud.githubusercontent.com/assets/1303660/14769837/c9bf8438-0a59-11e6-8a16-5cff6886adbc.png)

## Bookmarklet

Add the link to the bookmarks and click on it. You'll then have access to the `breakpoints` object in the console.

<a href="javascript:eval(decodeURIComponent('(function(e)%7Bvar%20r%3D%7B%7D%3Bfunction%20t(o)%7Bif(r%5Bo%5D)return%20r%5Bo%5D.exports%3Bvar%20n%3Dr%5Bo%5D%3D%7Bexports%3A%7B%7D%2Cid%3Ao%2Cloaded%3Afalse%7D%3Be%5Bo%5D.call(n.exports%2Cn%2Cn.exports%2Ct)%3Bn.loaded%3Dtrue%3Breturn%20n.exports%7Dt.m%3De%3Bt.c%3Dr%3Bt.p%3D%22%22%3Breturn%20t(0)%7D)(%7B0%3Afunction(module%2Cexports%2C__webpack_require__)%7B%22use%20strict%22%3Bvar%20_debugObj%3D__webpack_require__(165)%3Bvar%20_debugObj2%3D_interopRequireDefault(_debugObj)%3Bvar%20_predefinedBreakpoints%3D__webpack_require__(161)%3Bvar%20_predefinedBreakpoints2%3D_interopRequireDefault(_predefinedBreakpoints)%3Bfunction%20_interopRequireDefault(e)%7Breturn%20e%26%26e.__esModule%3Fe%3A%7B%22default%22%3Ae%7D%7D(function()%7Bif(window.breakpoints!%3D%3Dundefined)%7Bif(!window.breakpoints.__internal%7C%7C!window.breakpoints.__internal.isBreakpointCollectionExtension)%7Bconsole.log(%22Breakpoints%20extension%20can\'t%20load%2C%20global%20%60breakpoints%60%20variable%20is%20already%20defined%22)%7Dreturn%7Dfunction%20debuggerFunction()%7Bdebugger%7DdebuggerFunction.callbackType%3D%22debugger%22%3Bfunction%20debugPropertyCall(e%2Cr%2Ct)%7Bt%3DgetCallbackFromUserFriendlyCallbackArgument(t%2Ce%2Cr%2C%22call%22)%3Breturn(0%2C_debugObj2.default)(e%2Cr%2C%7BpropertyCallBefore%3At%7D)%7Dvar%20debugPropertyGet%3Dfunction%20e(r%2Ct%2Co)%7Breturn(0%2C_debugObj2.default)(r%2Ct%2C%7BpropertyGetBefore%3Ao%7D)%7D%3Bvar%20debugPropertySet%3Dfunction%20r(e%2Ct%2Co)%7Breturn(0%2C_debugObj2.default)(e%2Ct%2C%7BpropertySetBefore%3Ao%7D)%7D%3Bvar%20registeredBreakpoints%3D%5B%5D%3Bfunction%20pushRegisteredBreakpointsToExtension()%7Bvar%20e%3Dnew%20CustomEvent(%22RebroadcastExtensionMessage%22%2C%7Btype%3A%22updateRegisteredBreakpoints%22%2CregisteredBreakpoints%3AregisteredBreakpoints%7D)%3Bwindow.dispatchEvent(e)%7DpushRegisteredBreakpointsToExtension()%3Bfunction%20getCallbackFromUserFriendlyCallbackArgument(e%2Cr%2Ct%2Co)%7Bif(typeof%20e%3D%3D%3D%22function%22)%7Be.callbackType%3D%22custom%22%3Breturn%20e%7Delse%20if(typeof%20e%3D%3D%3D%22string%22)%7Bif(e%3D%3D%3D%22debugger%22)%7Breturn%20debuggerFunction%7Delse%20if(e%3D%3D%3D%22trace%22)%7Breturn%20getTraceFunction(r%2Ct%2Co)%7Delse%7Bthrow%20new%20Error(%22Invalid%20string%20callback%22)%7D%7Delse%20if(typeof%20e%3D%3D%3D%22undefined%22)%7Breturn%20debuggerFunction%7Delse%7Bthrow%20new%20Error(%22Invalid%20callback%20type%22)%7D%7Dfunction%20getTraceFunction(e%2Cr%2Ct)%7Bvar%20o%3Dfunction%20n()%7Bconsole.trace(%22About%20to%20%22%2Bt%2B%22%20property%20\'%22%2Br%2B%22\'%20on%20this%20object%3A%20%22%2Ce)%7D%3Bo.callbackType%3D%22trace%22%3Breturn%20o%7Dfunction%20getCallbackFromBreakpointDetails(e%2Cr%2Ct)%7Bif(e.type%3D%3D%3D%22debugger%22)%7Breturn%20debuggerFunction%7Delse%20if(e.type%3D%3D%3D%22trace%22)%7Breturn%20function()%7Bvar%20o%3De.traceMessage%3Bif(o!%3D%3Dundefined)%7Bconsole.trace(e.traceMessage)%7Delse%7Bvar%20n%3DgetTraceFunction(r%2Ct%2Ce.accessType)%3Bn()%7D%7D%7Delse%7Bthrow%20new%20Error(%22Invalid%20breakpoint%20type%22)%7D%7Dvar%20__internal%3D%7BisBreakpointCollectionExtension%3Atrue%2Cdebug%3A%7B_registry%3A_debugObj.registry%2C_debugObj%3A_debugObj2.default%2C_objectsAndPropsByDebugId%3A_debugObj.objectsAndPropsByDebugId%2C_registeredBreakpoints%3AregisteredBreakpoints%7D%2CregisterBreakpointAndGetResetBreakpointFunction%3Afunction%20t()%7Bvar%20e%3D__internal.registerBreakpoint.apply(this%2Carguments)%3Breturn%20function%20r()%7B__internal.disableBreakpoint(e)%7D%7D%2CregisterBreakpoint%3Afunction%20o(e%2Cr%2Ct)%7Bvar%20o%3D%5B%5D%3Bvar%20n%3Dfunction%20u(e%2Cr%2Cn)%7Bif(t)%7Bn%3Dt%7Do.push(debugPropertyGet(e%2Cr%2Cn))%7D%3Bvar%20i%3Dfunction%20l(e%2Cr%2Cn)%7Bif(t)%7Bn%3Dt%7Do.push(debugPropertySet(e%2Cr%2Cn))%7D%3Bvar%20a%3Dfunction%20s(e%2Cr%2Cn)%7Bif(t)%7Bn%3Dt%7Do.push(debugPropertyCall(e%2Cr%2Cn))%7D%3Be(n%2Ci%2Ca)%3Bvar%20p%3DMath.floor(Math.random()*1e9)%3BregisteredBreakpoints.push(%7Bid%3Ap%2CdebugIds%3Ao%2Cdetails%3Ar%2CcreatedAt%3Anew%20Date%7D)%3BpushRegisteredBreakpointsToExtension()%3Breturn%20p%7D%2CcreateSpecificBreakpoint%3Afunction%20n(e)%7Bwindow.breakpoints%5Be%5D(%22trace%22)%7D%2CregisterBreakpointFromExtension%3Afunction%20i(e%2Cr)%7Bvar%20t%3DgetCallbackFromBreakpointDetails(r)%3Bvar%20o%3Dwindow.breakpoints.__internal.registerBreakpoint(e%2Cr%2Ct)%7D%2CgetRegisteredBreakpoints%3Afunction%20a()%7Breturn%20registeredBreakpoints%7D%2CdisableBreakpoint%3Afunction%20p(e%2Cr)%7Bvar%20t%3DregisteredBreakpoints.filter(function(r)%7Breturn%20r.id%3D%3De%7D)%5B0%5D%3Bif(t%3D%3D%3Dundefined)%7Bconsole.log(%22Couldn\'t%20find%20breakpoint%20with%20id%22%2Ce)%3Breturn%7Dt.debugIds.forEach(function(e)%7B(0%2C_debugObj.resetDebug)(e)%7D)%3BregisteredBreakpoints%3DregisteredBreakpoints.filter(function(r)%7Breturn%20r.id!%3De%7D)%3Bif(!r)%7BpushRegisteredBreakpointsToExtension()%7D%7D%2CupdateBreakpoint%3Afunction%20u(e%2Cr)%7Bvar%20t%3DregisteredBreakpoints.filter(function(r)%7Breturn%20r.id%3D%3De%7D)%5B0%5D%3Bt.debugIds.forEach(function(e)%7Bvar%20t%3D_debugObj.objectsAndPropsByDebugId%5Be%5D%3Bvar%20o%3Dt.obj%3Bvar%20n%3Dt.prop%3Bvar%20i%3DgetCallbackFromBreakpointDetails(r%2Co%2Cn)%3B(0%2C_debugObj.updateDebugIdCallback)(e%2Ci)%7D)%3Bt.details%3Dr%3BpushRegisteredBreakpointsToExtension()%7D%2CsetTypeOfMostRecentBreakpointToDebugger%3Afunction%20l()%7Bvar%20e%3DregisteredBreakpoints%5BregisteredBreakpoints.length-1%5D%3Bvar%20r%3De.details%3Br.type%3D%22debugger%22%3B__internal.updateBreakpoint(e.id%2Cr)%7D%7D%3Bfunction%20publicDebugPropertyAccess(e%2Cr%2Ct%2Co)%7Bvar%20n%3D%7Bget%3A%22debugPropertyGet%22%2Cset%3A%22debugPropertySet%22%2Ccall%3A%22debugPropertyCall%22%7D%5Bo%5D%3Bt%3DgetCallbackFromUserFriendlyCallbackArgument(t%2Ce%2Cr%2C%22get%22)%3Breturn%20__internal.registerBreakpointAndGetResetBreakpointFunction(function(o%2Ci%2Ca)%7Bvar%20p%3D%7BdebugPropertyGet%3Ao%2CdebugPropertySet%3Ai%2CdebugPropertyCall%3Aa%7D%3Bp%5Bn%5D(e%2Cr%2Ct)%7D%2C%7Btitle%3An%2B%22%20(%22%2Br%2B%22)%22%2Ctype%3At.callbackType%2CaccessType%3Ao%7D)%7Dvar%20breakpoints%3D%7BdebugPropertyGet%3Afunction%20s(e%2Cr%2Ct)%7Breturn%20publicDebugPropertyAccess(e%2Cr%2Ct%2C%22get%22)%7D%2CdebugPropertySet%3Afunction%20c(e%2Cr%2Ct)%7Breturn%20publicDebugPropertyAccess(e%2Cr%2Ct%2C%22set%22)%7D%2CdebugPropertyCall%3Afunction%20d(e%2Cr%2Ct)%7Breturn%20publicDebugPropertyAccess(e%2Cr%2Ct%2C%22call%22)%7D%2CresetAllBreakpoints%3Afunction%20b()%7BregisteredBreakpoints.forEach(function(e)%7B__internal.disableBreakpoint(e.id%2Ctrue)%7D)%3BpushRegisteredBreakpointsToExtension()%7D%2CresetLastBreakpoint%3Afunction%20g()%7Bif(registeredBreakpoints.length%3D%3D%3D0)%7Bconsole.log(%22No%20breakpoints%20are%20currently%20registered%22)%3Breturn%7Dvar%20e%3DregisteredBreakpoints%5BregisteredBreakpoints.length-1%5D%3B__internal.disableBreakpoint(e.id)%7D%2C__internal%3A__internal%7D%3B_predefinedBreakpoints2.default.forEach(function(breakpoint)%7Bbreakpoints%5Bbreakpoint.title%5D%3Dfunction(callback)%7Bcallback%3DgetCallbackFromUserFriendlyCallbackArgument(callback)%3Bvar%20details%3D%7Btitle%3Abreakpoint.title%2CtraceMessage%3Abreakpoint.traceMessage%2Ctype%3Acallback.callbackType%7D%3Bvar%20fn%3Dfunction%20fn(debugPropertyGet%2CdebugPropertySet%2CdebugPropertyCall)%7Bif(breakpoint.debugPropertyGets)%7Bbreakpoint.debugPropertyGets.forEach(function(property)%7BdebugPropertyGet(eval(property.obj)%2Cproperty.prop%2Ccallback)%7D)%7Dif(breakpoint.debugPropertySets)%7Bbreakpoint.debugPropertySets.forEach(function(property)%7BdebugPropertySet(eval(property.obj)%2Cproperty.prop%2Ccallback)%7D)%7Dif(breakpoint.debugCalls)%7Bbreakpoint.debugCalls.forEach(function(property)%7BdebugPropertyCall(eval(property.obj)%2Cproperty.prop%2Ccallback)%7D)%7D%7D%3Breturn%20__internal.registerBreakpointAndGetResetBreakpointFunction(fn%2Cdetails)%7D%7D)%3Bwindow.breakpoints%3Dbreakpoints%7D)()%7D%2C161%3Afunction(e%2Cr)%7B%22use%20strict%22%3BObject.defineProperty(r%2C%22__esModule%22%2C%7Bvalue%3Atrue%7D)%3Br.default%3D%5B%7Btitle%3A%22debugCookieReads%22%2CdebugPropertyGets%3A%5B%7Bobj%3A%22document%22%2Cprop%3A%22cookie%22%7D%5D%2CtraceMessage%3A%22About%20to%20read%20cookie%20contents%22%7D%2C%7Btitle%3A%22debugCookieWrites%22%2CdebugPropertySets%3A%5B%7Bobj%3A%22document%22%2Cprop%3A%22cookie%22%7D%5D%2CtraceMessage%3A%22About%20to%20update%20cookie%20contents%22%7D%2C%7Btitle%3A%22debugAlertCalls%22%2CdebugCalls%3A%5B%7Bobj%3A%22window%22%2Cprop%3A%22alert%22%7D%5D%2CtraceMessage%3A%22About%20to%20show%20alert%20box%22%7D%2C%7Btitle%3A%22debugConsoleErrorCalls%22%2CdebugCalls%3A%5B%7Bobj%3A%22window.console%22%2Cprop%3A%22error%22%7D%5D%2CtraceMessage%3A%22About%20to%20call%20console.error%22%7D%2C%7Btitle%3A%22debugConsoleLogCalls%22%2CdebugCalls%3A%5B%7Bobj%3A%22window.console%22%2Cprop%3A%22log%22%7D%5D%2CtraceMessage%3A%22About%20to%20call%20console.log%22%7D%2C%7Btitle%3A%22debugScroll%22%2CdebugCalls%3A%5B%7Bobj%3A%22window%22%2Cprop%3A%22scrollTo%22%7D%2C%7Bobj%3A%22window%22%2Cprop%3A%22scrollBy%22%7D%5D%2CdebugPropertySets%3A%5B%7Bobj%3A%22document.body%22%2Cprop%3A%22scrollTop%22%7D%2C%7Bobj%3A%22document.body%22%2Cprop%3A%22scrollLeft%22%7D%2C%7Bobj%3A%22Element.prototype%22%2Cprop%3A%22scrollTop%22%7D%2C%7Bobj%3A%22Element.prototype%22%2Cprop%3A%22scrollLeft%22%7D%5D%2CtraceMessage%3A%22About%20to%20change%20body%20scroll%20position%22%7D%2C%7Btitle%3A%22debugLocalStorageReads%22%2CdebugCalls%3A%5B%7Bobj%3A%22window.localStorage%22%2Cprop%3A%22getItem%22%7D%5D%2CtraceMessage%3A%22About%20to%20read%20localStorage%20data%22%7D%2C%7Btitle%3A%22debugLocalStorageWrites%22%2CdebugCalls%3A%5B%7Bobj%3A%22window.localStorage%22%2Cprop%3A%22setItem%22%7D%2C%7Bobj%3A%22window.localStorage%22%2Cprop%3A%22clear%22%7D%5D%2CtraceMessage%3A%22About%20to%20write%20localStorage%20data%22%7D%5D%7D%2C165%3Afunction(e%2Cr)%7B%22use%20strict%22%3BObject.defineProperty(r%2C%22__esModule%22%2C%7Bvalue%3Atrue%7D)%3Br.default%3Da%3Br.updateDebugIdCallback%3Du%3Br.resetDebug%3Dl%3Bvar%20t%3Dnew%20Map%3Bvar%20o%3D%7B%7D%3Bvar%20n%3D%5B%22propertyGetBefore%22%2C%22propertyGetAfter%22%2C%22propertySetBefore%22%2C%22propertySetAfter%22%2C%22propertyCallBefore%22%2C%22propertyCallAfter%22%5D%3Bfunction%20i(e%2Cr)%7Btry%7Bvar%20t%3DObject.getOwnPropertyDescriptor(e%2Cr)%7Dcatch(o)%7Bconsole.log(%22are%20you%20sure%20the%20property%20%22%2Cr%2C%22%20exists%3F%22)%3Bthrow%20o%7Dif(!e)%7Bthrow%20new%20Error(%22Descriptor%20%22%2Br%2B%22%20not%20found%22)%7Dif(!t)%7Breturn%20i(Object.getPrototypeOf(e)%2Cr)%7Dreturn%20t%7Dr.registry%3Dt%3Br.objectsAndPropsByDebugId%3Do%3Bfunction%20a(e%2Cr%2Ca)%7Bvar%20p%3DMath.floor(Math.random()*1e11).toString()%3Bo%5Bp%5D%3D%7Bobj%3Ae%2Cprop%3Ar%7D%3Bif(t.get(e)%3D%3D%3Dundefined)%7Bt.set(e%2C%7B%7D)%7Dif(t.get(e)%5Br%5D%3D%3D%3Dundefined)%7Bt.get(e)%5Br%5D%3D%7Bhooks%3A%7B%7D%7D%3Bvar%20u%3Di(e%2Cr)%3Bvar%20l%3D%22value%22in%20u%3BObject.defineProperty(e%2Cr%2C%7Bget%3Afunction%20c()%7Bvar%20e%3Bs(%22propertyGetBefore%22)%3Bif(l)%7Be%3Du.value%7Delse%7Be%3Du.get.apply(this%2Carguments)%7Dif(typeof%20e%3D%3D%3D%22function%22)%7Breturn%20function()%7Bs(%22propertyCallBefore%22)%3Be.apply(this%2Carguments)%3Bs(%22propertyCallAfter%22)%7D%7Ds(%22propertyGetAfter%22)%3Breturn%20e%7D%2Cset%3Afunction%20d(e)%7Bvar%20r%3Bs(%22propertySetBefore%22)%3Bif(l)%7Br%3Du.value%3De%7Delse%7Br%3Du.set.apply(this%2Carguments)%7Ds(%22propertySetAfter%22)%3Breturn%20r%7D%7D)%7Dn.forEach(function(o)%7Bif(a%5Bo%5D!%3D%3Dundefined)%7Bif(t.get(e)%5Br%5D.hooks%5Bo%5D%3D%3D%3Dundefined)%7Bt.get(e)%5Br%5D.hooks%5Bo%5D%3D%5B%5D%7Dt.get(e)%5Br%5D.hooks%5Bo%5D.push(%7Bid%3Ap%2Cfn%3Aa%5Bo%5D%7D)%7D%7D)%3Breturn%20p%3Bfunction%20s(o)%7Bvar%20n%3Dt.get(e)%5Br%5D.hooks%3Bvar%20i%3Dn%5Bo%5D%3Bif(i!%3D%3Dundefined%26%26i.length%3E0)%7Bi.forEach(function(e)%7Be.fn()%7D)%7D%7D%7Dfunction%20p(e%2Cr%2Co)%7Bvar%20i%3Dt.get(e)%5Br%5D.hooks%3Bn.forEach(function(e)%7Bvar%20r%3D%22%22%3Bif(e%3D%3D%3D%22propertyGetBefore%22%7C%7Ce%3D%3D%3D%22propertyGetAfter%22)%7Br%3D%22get%22%7Dif(e%3D%3D%3D%22propertySetBefore%22%7C%7Ce%3D%3D%3D%22propertySetAfter%22)%7Br%3D%22set%22%7Dif(e%3D%3D%3D%22propertyCallBefore%22%7C%7Ce%3D%3D%3D%22propertyCallAfter%22)%7Br%3D%22call%22%7Dvar%20t%3Di%5Be%5D%3Bif(t!%3D%3Dundefined)%7Bi%5Be%5D%3Dt.map(function(e)%7Breturn%20o(e%2Cr)%7D)%7D%7D)%7Dfunction%20u(e%2Cr)%7Bvar%20t%3Do%5Be%5D%3Bp(t.obj%2Ct.prop%2Cfunction(t%2Co)%7Bif(t.id%3D%3D%3De)%7Breturn%7Bid%3Ae%2Cfn%3Ar%7D%7Delse%7Breturn%20t%7D%7D)%7Dfunction%20l(e)%7Bvar%20r%3Do%5Be%5D%3Bvar%20n%3Dt.get(r.obj)%5Br.prop%5D.hooks%3Bfor(var%20i%20in%20n)%7Bvar%20a%3Dn%5Bi%5D%3Bn%5Bi%5D%3Da.filter(function(r)%7Breturn%20r.id!%3De%7D)%7Ddelete%20o%5Be%5D%7D%7D%7D)%3B'))
">JS Breakpoint Collection</a>


## Development

Install the dependencies:

    npm install webpack -g
    npm install

The build the project:
    
    webpack --watch

And run the tests:
    
    npm run test

### Loading the extension in Chrome

1. Go to [chrome://extensions/](chrome://extensions/)
2. Enter Developer Mode
3. Load Unpacked Extension
4. Select "extension" directory in this repo

### Generating the bookmarklet

Run `node generate-bookmarklet.js` and copy the output into the Readme.